Task ID,Area,Checkpoint ID,Completed By,Completed Date,Component,Done,Due Date,Mark Done,Notes,Owner,Phase,Priority,Progress,Section,Source Doc,Start Date,Start Task,Started By,Status,Task
P3-A-001,Standards,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",0) Conventions,Phase 3 - DEV Checkpoints,,,,Not Started,Redis keys (additions for Phase 3):
P3-A-002,Standards,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",0) Conventions,Phase 3 - DEV Checkpoints,,,,Not Started,"On-chain strategy: Confirm the target EVM L2 for ReFIN (e.g., Base / OP Mainnet / Arbitrum) and Ethereum L1 for anchoring."
P3-A-003,Standards,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",0) Conventions,Phase 3 - DEV Checkpoints,,,,Not Started,"Hashing algorithm: Standardize Phase-3 hashing; default SHA-256 with option to switch to keccak256 via config (must be consistent across Writer, Builder, Explorer)."
P3-A-004,Infra,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",1) Google Cloud Project & Networking,Phase 3 - DEV Checkpoints,,,,Not Started,Egress allow-list (updates):
P3-A-005,Infra,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",1) Google Cloud Project & Networking,Phase 3 - DEV Checkpoints,,,,Not Started,GCS bucket (updates): Create per-env Audit Preimages bucket; enable object versioning and retention. (Explorer serves redacted preimages from GCS.)
P3-A-006,Data Infra,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",2) Data Stores — MongoDB Atlas,Phase 3 - DEV Checkpoints,,,,Not Started,"Apply Cloud Spanner Phase-3 DDL and verify tables exist: audit_leaves, merkle_intervals, refin_roots, l1_anchors, anchor_queue, anchor_runs, explorer_index"
P3-A-007,Data Infra,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",2) Data Stores — MongoDB Atlas,Phase 3 - DEV Checkpoints,,,,Not Started,Key indexes:
P3-A-008,Security,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",3) Security & IAM,Phase 3 - DEV Checkpoints,,,,Not Started,"Service accounts (new): `sa-audit-writer`, `sa-merkle-builder`, `sa-anchor-job`, `sa-refin-indexer`, `sa-explorer-api`."
P3-A-009,Security,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",3) Security & IAM,Phase 3 - DEV Checkpoints,,,,Not Started,Least-privilege roles:
P3-A-010,Security,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",3) Security & IAM,Phase 3 - DEV Checkpoints,,,,Not Started,Secrets (new):
P3-A-011,Messaging,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",4) Pub/Sub Event Bus,Phase 3 - DEV Checkpoints,,,,Not Started,Topics (updates): Create `audit.evt` (if not already present).
P3-A-012,Messaging,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",4) Pub/Sub Event Bus,Phase 3 - DEV Checkpoints,,,,Not Started,Subscriptions: Add Audit Writer subscriber with DLQ; ordering by suitable shard key.
P3-A-013,Messaging,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",4) Pub/Sub Event Bus,Phase 3 - DEV Checkpoints,,,,Not Started,"Producer modifications: Ensure Risk Engine, Execution Gateway, Trade Manager publish to `audit.evt` at key state transitions."
P3-A-014,CI/CD,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",5) CI/CD & Runtime Configuration,Phase 3 - DEV Checkpoints,,,,Not Started,"Repository: Add service directories: `audit-writer/`, `merkle-builder/`, `anchor-job/`, `refin-indexer/`, `explorer-api/`."
P3-A-015,CI/CD,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",5) CI/CD & Runtime Configuration,Phase 3 - DEV Checkpoints,,,,Not Started,"Smart contracts: Add `contracts/refin/` for AuditRegistry (and libs); configure Hardhat/Foundry deploys per env (chain IDs, submitter role)."
P3-A-016,CI/CD,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",5) CI/CD & Runtime Configuration,Phase 3 - DEV Checkpoints,,,,Not Started,Pipelines: Build & deploy Cloud Run services; compile & deploy contracts to the chosen L2; promote via staged envs.
P3-A-017,CI/CD,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",5) CI/CD & Runtime Configuration,Phase 3 - DEV Checkpoints,,,,Not Started,Runtime config:
P3-A-018,Observability,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",7) Observability & SLOs,Phase 3 - DEV Checkpoints,,,,Not Started,Dashboards:
P3-A-019,Observability,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",7) Observability & SLOs,Phase 3 - DEV Checkpoints,,,,Not Started,Alerts:
P3-A-020,Observability,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",7) Observability & SLOs,Phase 3 - DEV Checkpoints,,,,Not Started,Phase-3 SLO baselines:
P3-A-021,On-chain,P3-A,,,On-Chain,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — On-Chain,Phase 3 - DEV Checkpoints,,,,Not Started,Contracts deployed: AuditRegistry on L2; L1 Anchor on Ethereum.
P3-A-022,On-chain,P3-A,,,On-Chain,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — On-Chain,Phase 3 - DEV Checkpoints,,,,Not Started,Submitter role: grant Builder’s wallet the submitter role in AuditRegistry.
P3-A-023,Service,P3-A,,,Audit Writer,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Audit Writer,Phase 3 - DEV Checkpoints,,,,Not Started,Subscription: service subscribed to `audit.evt` with DLQ.
P3-A-024,Service,P3-A,,,Audit Writer,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Audit Writer,Phase 3 - DEV Checkpoints,,,,Not Started,Config: canonicalization/redaction policies in `AuditConfig`.
P3-A-025,Data Infra,P3-A,,,Audit Writer,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Audit Writer,Phase 3 - DEV Checkpoints,,,,Not Started,"Create/verify Cloud Spanner indexes per Phase-3 DDL (ix_leaves_batch, ix_leaves_corr, ux_intervals_root, ix_intervals_l2tx, ix_intervals_window, ux_roots_root, ix_roots_status, ix_l1_tx, ix_l1_status, ix_queue_status, ix_queue_enqueued, ix_runs_started, ix_explorer_ttl)"
P3-A-026,Data Model,P3-A,,,Merkle Builder,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Merkle Builder,Phase 3 - DEV Checkpoints,,,,Not Started,Use time/size window rotation and Spanner queries for new leaves (no change streams)
P3-A-027,Service,P3-A,,,Merkle Builder,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Merkle Builder,Phase 3 - DEV Checkpoints,,,,Not Started,"Config: rotation policy (time/size), shard policy."
P3-A-028,Service,P3-A,,,Merkle Builder,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Merkle Builder,Phase 3 - DEV Checkpoints,,,,Not Started,Secrets: L2 submitter private key loaded.
P3-A-029,On-chain,P3-A,,,Anchor Job,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Anchor Job,Phase 3 - DEV Checkpoints,,,,Not Started,"Scheduler: Cloud Scheduler cadence (e.g., every 5–15 min)."
P3-A-030,On-chain,P3-A,,,Anchor Job,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Anchor Job,Phase 3 - DEV Checkpoints,,,,Not Started,Secrets: L1 anchor wallet key and CCIP config present.
P3-A-031,Data Infra,P3-A,,,Anchor Job,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Anchor Job,Phase 3 - DEV Checkpoints,,,,Not Started,"Cloud Spanner tables: `AnchorQueue`, `L1Anchors`, `AnchorRuns`."
P3-A-032,API,P3-A,,,Explorer API,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",8) Component-Level Preflight (Phase 3) — Explorer API,Phase 3 - DEV Checkpoints,,,,Not Started,Config: L2/L1 RPC endpoints; GCS bucket for redacted preimages; Redis rate limits.
P3-A-033,Validation,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",9) Smoke Tests,Phase 3 - DEV Checkpoints,,,,Not Started,"Publish a test `audit.evt` (e.g., from Risk)."
P3-A-034,Validation,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",9) Smoke Tests,Phase 3 - DEV Checkpoints,,,,Not Started,Verify Writer consumes and creates `AuditLeaves`/`AuditLogs` entry with leaf/chain hashes.
P3-A-035,Validation,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",9) Smoke Tests,Phase 3 - DEV Checkpoints,,,,Not Started,"Insert several leaves; confirm Builder opens a batch, then finalizes a `MerkleIntervals` with `root`; submitRoot to ReFIN; receipt appears in `ReFINRoots`."
P3-A-036,Validation,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",9) Smoke Tests,Phase 3 - DEV Checkpoints,,,,Not Started,"Trigger Anchor Job; see cache-miss selection, bundle, CCIP send, and L1Anchors upsert; check L1 explorer for receipt."
P3-A-037,Validation,P3-A,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint A (https://www.notion.so/Checkpoint-A-26b0cff8415880249a37d2c5fcff32e3?pvs=21)",9) Smoke Tests,Phase 3 - DEV Checkpoints,,,,Not Started,"Call `GET /v1/resolve/{hash}`; response includes leaf, interval, L2 receipt, and L1 anchor receipt (when available)."
P3-B-001,Engineering,P3-B,,,Producers (Risk,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Producers (Risk,Phase 3 - DEV Checkpoints,,,,Not Started,"Emit compact `audit.evt` at each defined transition with required attributes `schema_version`, `correlationId`, `emitter`, `emitted_at`, plus the natural domain key (`clientOrderId` | `intent_id` | `plan_id`). Bodies must be deterministic and omit nondeterministic fields."
P3-B-002,Engineering,P3-B,,,Producers (Risk,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Producers (Risk,Phase 3 - DEV Checkpoints,,,,Not Started,Ensure per-domain ordering keys match the hot-path conventions so replays are stable.
P3-B-003,Engineering,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,Subscription: Consume `audit.evt` with DLQ; apply shard-aware ordering for consistent sequencing.
P3-B-004,Engineering,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,Sequencing: Allocate `seq_no` per shard; keep monotonic sequences via Redis `aud:seq:{shard}`. Maintain short-TTL `aud:seen:{idem}` for idempotency.
P3-B-005,Engineering,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Canonicalization & redaction: Stable JSON (ordered keys, UTC timestamps, normalized numerics); apply redaction maps prior to hashing. Upload redacted preimages to GCS and store only references."
P3-B-006,Engineering,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Hashing: Compute `leaf_hash` using the standardized algorithm (default SHA-256, optional keccak256 via config; must be consistent across Writer, Builder, Explorer)."
P3-B-007,Data Infra,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Persistence (Cloud Spanner): Upsert to `audit_leaves` with fields `{leaf_id, leaf_hash, emitter, type, correlationId, clientOrderId, intent_id, plan_id, seq_no, shard_id, schema_version, preimage_ref, created_at}`. Create secondary indexes on `correlationId`, `clientOrderId`, `intent_id`, and `created_at DESC`."
P3-B-008,Engineering,P3-B,,,Audit Writer (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",1) Development & Integration Plan — Audit Writer (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Observability: Emit ingest and redact latencies, duplicate-dropped counters, DLQ metrics."
P3-B-009,Validation,P3-B,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Manual end-to-end trigger: Push an `account.intent.ready` to drive Phase-1 (Risk → EG → TM). Verify producers publish `audit.evt` at each transition.
P3-B-010,Validation,P3-B,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,"Event publishing verification: In Pub/Sub, confirm `audit.evt` from Risk, Execution Gateway, and Trade Manager carry expected snapshots."
P3-B-011,Data Model,P3-B,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Audit Writer verification: Logs show `seq_no` allocation and `idem` computation; Spanner contains new `audit_leaves` rows; `leaf_hash` recomputes locally; `preimage_ref` points to a redacted GCS object.
P3-B-012,Validation,P3-B,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint B (https://www.notion.so/Checkpoint-B-26b0cff84158802a964ac6a4fad55dde?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Idempotency check: Re-publish a captured `audit.evt`; confirm no duplicate leaf due to `aud:seen:{idem}` and leaf-idempotency.
P3-C-001,Data Model,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Intake: Detect new leaves from Spanner (`audit_leaves`) using commit-timestamp polling or a lightweight notifier; derive `shard_key` (e.g., `(emitter, window_start)`); use Redis `mrk:lock:{shard_key}` to guard finalization. Maintain a per-shard idempotency token."
P3-C-002,Data Model,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Open-batch state: Track an open batch in Spanner (builder state or `merkle_intervals` row with `state=open`) storing `{batch_key, window_start, leaf_count}`. Preserve monotonic order by `(seq_no, leaf_id)` for deterministic proofs."
P3-C-003,Engineering,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Rotation policy: Seal by time (e.g., ≥5–10 min) or size thresholds; mark `state=closing` with `window_end`."
P3-C-004,Engineering,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Finalize — root & proofs: Load ordered `leaf_hash[]`, compute Merkle root (default SHA-256, `keccak256` optional via config), and build inclusion proofs."
P3-C-005,Data Infra,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Persistence (Spanner): Write `merkle_intervals` `{batch_id, emitter, window_start, window_end, root, leaf_count, hash_algo, created_at}` and set `batch_id` on the linked leaves. Create indexes on `(root)`, `(window_start DESC)`."
P3-C-006,Engineering,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"L2 submit: Call `AuditRegistry.submitRoot(batchId, root, meta…)`; persist `refin_roots` `{batch_id, root, l2_tx_hash, anchor_status}` and backfill `l2_tx_hash` on `merkle_intervals`."
P3-C-007,Engineering,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,"Anchor enqueue: Insert into `anchor_queue` `{batch_id, root, l2_tx_hash, status=pending}`."
P3-C-008,Engineering,P3-C,,,Merkle Builder (Cloud Run),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",1) Development & Integration Plan — Merkle Builder (Cloud Run),Phase 3 - DEV Checkpoints,,,,Not Started,Indexing: ReFIN Indexer mirrors receipts into `refin_roots` and links to intervals; alert on indexer lag.
P3-C-009,Validation,P3-C,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Determinism: Recompute the Merkle root from batch leaves and confirm it equals `merkle_intervals.root`.
P3-C-010,Validation,P3-C,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,L2 transaction: Submit a dev batch; verify L2 receipt; confirm `refin_roots` upsert and `l2_tx_hash` linked on `merkle_intervals`.
P3-C-011,Validation,P3-C,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Queueing: Validate `anchor_queue` row creation post-submit with `status=pending`.
P3-C-012,Validation,P3-C,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint C (https://www.notion.so/Checkpoint-C-26b0cff84158801b8153d54a45c76844?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,"Latency SLO: Leaf → root commit completes within the configured cadence (e.g., ≤ 60 s)."
P3-D-001,Engineering,P3-D,,,Anchor Job (CCIP),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Anchor Job (CCIP),Phase 3 - DEV Checkpoints,,,,Not Started,Eligibility: Select finalized roots with `anchor_status=pending` from `refin_roots` or pop from `anchor_queue`; sort deterministically.
P3-D-002,Engineering,P3-D,,,Anchor Job (CCIP),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Anchor Job (CCIP),Phase 3 - DEV Checkpoints,,,,Not Started,"Bundle compose: Create `AnchorBundle` within thresholds (`max_roots`, `max_bytes`, `max_age_seconds`); derive `bundle_id` from ordered `batch_id[]`."
P3-D-003,Engineering,P3-D,,,Anchor Job (CCIP),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Anchor Job (CCIP),Phase 3 - DEV Checkpoints,,,,Not Started,"Send via CCIP: Submit to L1 Anchor; persist `message_id`, provisional `l1_tx_hash`."
P3-D-004,Engineering,P3-D,,,Anchor Job (CCIP),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Anchor Job (CCIP),Phase 3 - DEV Checkpoints,,,,Not Started,"Confirm & mark: Upsert `l1_anchors` `{bundle_id, roots[]|super_root, message_id, l1_tx_hash, status, block_no, confirmed_at}` and set `refin_roots.anchor_status=anchored`."
P3-D-005,Engineering,P3-D,,,Anchor Job (CCIP),No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Anchor Job (CCIP),Phase 3 - DEV Checkpoints,,,,Not Started,Idempotency & safety: Never re-anchor the same `batch_id`; exponential backoff and circuit breakers on RPC/CCIP failures.
P3-D-006,Engineering,P3-D,,,Explorer API,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Explorer API,Phase 3 - DEV Checkpoints,,,,Not Started,"Resolve path: Join `audit_leaves → merkle_intervals → refin_roots → l1_anchors`; return a compact record keyed by `correlationId`, including leaf metadata, interval/root, L2 tx hash, L1 anchor tx hash, and `preimage_ref`."
P3-D-007,Engineering,P3-D,,,Explorer API,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Explorer API,Phase 3 - DEV Checkpoints,,,,Not Started,Verify inclusion: Recompute Merkle proof for a given leaf against stored root; return validity result and references.
P3-D-008,Engineering,P3-D,,,Explorer API,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Explorer API,Phase 3 - DEV Checkpoints,,,,Not Started,Preimage access: Serve redacted preimages from GCS under auth; enforce rate limits.
P3-D-009,Engineering,P3-D,,,Security,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Security,Phase 3 - DEV Checkpoints,,,,Not Started,"Service accounts: `sa-anchor-job`, `sa-explorer-api`; keys and CCIP config in Secret Manager."
P3-D-010,Engineering,P3-D,,,Security,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Security,Phase 3 - DEV Checkpoints,,,,Not Started,On-chain config: L1/L2 RPC endpoints and CCIP router; address books per env.
P3-D-011,Observability,P3-D,,,Security,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",1) Development & Integration Plan — Security,Phase 3 - DEV Checkpoints,,,,Not Started,"Observability: Dashboards for CCIP send latency, L1 confirm time, indexer lag; API p95 ≤ 200 ms. Alerts for backlog growth and verification mismatches."
P3-D-012,Validation,P3-D,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,"Anchor Job verification: Ensure several un-anchored L2 roots exist; trigger a run; logs show selection, bundle creation, CCIP send; confirm the L1 tx on a block explorer; verify `l1_anchors` upsert and `refin_roots.anchor_status=anchored`."
P3-D-013,Validation,P3-D,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,"Explorer verification: Pick a `leaf_hash` from an anchored batch; `GET /v1/resolve/{hash}` returns interval/root, L2 tx, L1 tx, and preimage pointer; validate inclusion via `POST /v1/verify/inclusion`."
P3-D-014,Validation,P3-D,,,,No,,,,,3,,"Overall Progress (https://www.notion.so/Overall-Progress-26b0cff8415880bcb4dec0b1e70a7500?pvs=21), Checkpoint D (https://www.notion.so/Checkpoint-D-26b0cff8415880d48bf1df7e85158ce0?pvs=21)",2) Testing & Validation Checklist,Phase 3 - DEV Checkpoints,,,,Not Started,Formatting & timeline: Responses present a chronological trail for a given `correlationId`.